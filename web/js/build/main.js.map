{"version":3,"sources":["app.js","admin.controller.js","listeRecette.controller.js","recette.controller.js","commentaires.js","images-h.js","images-v.js","ingredients.js","recette.js","story.js","titre.js","recette.service.js"],"names":["cookieStoryApp","angular","module","config","$stateProvider","$urlRouterProvider","otherwise","state","url","templateUrl","controller","resolve","Recettes","RecetteService","listeRecette","then","result","data","Recette","$stateParams","getRecette","slug","Tags","listeTags","filter","input","slice","reverse","$","document","ready","limitScrollTop","parseInt","offset","top","scrollTop","css","position","z-index","window","scroll","posScroll","$scope","$state","recettes","tags","newRecette","go","modifierRecette","recette","deleteRecette","id","reload","addTag","nom","Upload","commentaires","countCommentaire","length","contenuText","contenuList","layout","addElement","element","contenu","pos","push","item","titre","positionEdition","undefined","deleteElement","splice","modifierElement","index","trierLayoutParPosition","monterElement","positionTmp","descendreElement","sort","elementA","elementB","addCommentaire","form","$valid","commentaire","pseudo","mail","website","recetteId","saveCommentaire","addRecette","saveRecette","addTagToRecette","tag","response","removeTagFromRecette","tagA","tagB","shift","uploadPic","file","upload","method","success","path","picFile","evt","progress","Math","min","loaded","total","isNotSelectedTag","some","tagRecette","directive","restrict","replace","scope","elements","image","template","story","service","$http","this","get","post","delete"],"mappings":"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","file":"main.js","sourcesContent":["// Define the `cookieStoryApp` module\r\nvar cookieStoryApp = angular.module('cookieStoryApp', ['ui.router', 'ngFileUpload']);\r\n\r\ncookieStoryApp.config(function($stateProvider, $urlRouterProvider) {\r\n\r\n    $urlRouterProvider.otherwise('/');\r\n\r\n    $stateProvider\r\n        // HOME STATES AND NESTED VIEWS ========================================\r\n        .state('home', {\r\n            url: '/',\r\n            templateUrl: 'views/home.html',\r\n            controller: 'ListeRecetteCtrl',\r\n            resolve: {\r\n              Recettes: function (RecetteService) {\r\n                return RecetteService.listeRecette().then(function (result) {\r\n                  return result.data;\r\n                });\r\n              },\r\n            }\r\n        })\r\n        .state('recette', {\r\n            url: '/recette/{slug}',\r\n            templateUrl: 'views/recette.html',\r\n            controller: 'RecetteCtrl',\r\n            resolve: {\r\n              Recette: function ($stateParams, RecetteService) {\r\n                return RecetteService.getRecette($stateParams.slug).then(function siToutEstBon (result) {\r\n                  return result.data;\r\n                }, function siQqchPlante() {\r\n\r\n                }, function pendantQueLaRequeteEstTraitée() {\r\n\r\n                })\r\n              },\r\n              Tags: function (RecetteService) {\r\n                return RecetteService.listeTags().then(function (result) {\r\n                  return result.data;\r\n                });\r\n              },\r\n            }\r\n        })\r\n        .state('newRecette', {\r\n            url: '/recette',\r\n            templateUrl: 'views/add.recette.html',\r\n            controller: 'RecetteCtrl',\r\n            resolve: {\r\n              Recette: function () {\r\n                return null;\r\n              },\r\n              Tags: function (RecetteService) {\r\n                return RecetteService.listeTags().then(function (result) {\r\n                  return result.data;\r\n                });\r\n              },\r\n            }\r\n        })\r\n        .state('modifierRecette', {\r\n            url: '/modifRecette/{slug}',\r\n            templateUrl: 'views/add.recette.html',\r\n            controller: 'RecetteCtrl',\r\n            resolve: {\r\n              Recette: function ($stateParams, RecetteService) {\r\n                return RecetteService.getRecette($stateParams.slug).then(function siToutEstBon (result) {\r\n                  return result.data;\r\n                }, function siQqchPlante() {\r\n\r\n                }, function pendantQueLaRequeteEstTraitée() {\r\n\r\n                })\r\n              },\r\n              Tags: function (RecetteService) {\r\n                return RecetteService.listeTags().then(function (result) {\r\n                  return result.data;\r\n                });\r\n              },\r\n            }\r\n        })\r\n        .state('indexRecette', {\r\n            url: '/index',\r\n            templateUrl: 'views/index.html',\r\n            controller: 'ListeRecetteCtrl',\r\n            resolve: {\r\n              Recettes: function (RecetteService) {\r\n                return RecetteService.listeRecette().then(function (result) {\r\n                  return result.data;\r\n                });\r\n              },\r\n            }\r\n        })\r\n        .state('pageAdmin', {\r\n            url: '/admin',\r\n            templateUrl: 'views/pageAdmin.html',\r\n            controller: 'adminCtrl',\r\n            resolve: {\r\n              Recettes: function (RecetteService) {\r\n                return RecetteService.listeRecette().then(function (result) {\r\n                  return result.data;\r\n                });\r\n              },\r\n              Tags: function (RecetteService) {\r\n                return RecetteService.listeTags().then(function (result) {\r\n                  return result.data;\r\n                });\r\n              },\r\n            }\r\n        })\r\n});\r\n\r\ncookieStoryApp.filter('reverse', function() {\r\n  return function(input) {\r\n    return input.slice().reverse();\r\n  };\r\n});\r\n","cookieStoryApp.controller('adminCtrl', ['$scope', '$state', 'RecetteService', 'Recettes', 'Tags',\r\n  function ($scope, $state, RecetteService, Recettes, Tags)\r\n{\r\n  $scope.recettes = Recettes;\r\n  $scope.tags = Tags;\r\n\r\n  $scope.newRecette = function () {\r\n    $state.go('newRecette');\r\n  }\r\n\r\n  $scope.modifierRecette = function (recette) {\r\n    $state.go('modifierRecette', {'slug': recette.slug});\r\n  }\r\n\r\n  $scope.deleteRecette = function (recette) {\r\n    RecetteService.deleteRecette(recette.id).then(function() {\r\n      $state.reload();\r\n    });\r\n  }\r\n\r\n  $scope.addTag = function (nom) {\r\n    RecetteService.addTag(nom).then(function(){\r\n      $state.reload();\r\n    })\r\n  }\r\n\r\n}])\r\n","cookieStoryApp.controller('ListeRecetteCtrl', ['$scope', '$state', 'RecetteService', 'Recettes',\r\n  function ($scope, $state, RecetteService, Recettes)\r\n{\r\n  $scope.recettes = Recettes;\r\n\r\n}])\r\n","cookieStoryApp.controller('RecetteCtrl', ['$scope', '$state', 'Upload', 'RecetteService', 'Recette', 'Tags',\r\n  function ($scope, $state, Upload, RecetteService, Recette, Tags)\r\n{\r\n\r\n  $scope.recette = Recette || {commentaires:[], tags:[]};\r\n  $scope.tags = Tags;\r\n  $scope.countCommentaire = $scope.recette.commentaires.length;\r\n\r\n  var position = 1;\r\n\r\n  $scope.contenuText='';\r\n  $scope.contenuList = [];\r\n\r\nif (Recette){\r\n  $scope.layout=Recette.layout;\r\n}\r\nelse{\r\n  $scope.layout = [];\r\n}\r\n\r\n  $scope.addElement = function (element, contenu, pos) {\r\n    if (element == 'titre') {\r\n      $scope.layout.push({item:'titre', position:pos ? pos : position, contenu:contenu})\r\n      $scope.recette.titre = contenu;\r\n    }\r\n    if (element == 'imageH') {\r\n      $scope.layout.push({item:'imageH', position:pos ? pos : position, contenu:contenu})\r\n    }\r\n    if (element == 'story') {\r\n      $scope.layout.push({item:'story', position:pos ? pos : position, contenu:contenu})\r\n    }\r\n    if (element == 'recette') {\r\n      $scope.layout.push({item:'recette', position:pos ? pos : position, contenu:contenu})\r\n    }\r\n    if (element == 'ingredients') {\r\n      $scope.layout.push({item:'ingredients', position:pos ? pos : position, contenu:contenu})\r\n    }\r\n    position++;\r\n    $scope.contenuText='';\r\n    $scope.contenuList = [];\r\n    $scope.positionEdition = undefined;\r\n  }\r\n\r\n  $scope.deleteElement = function (position) {\r\n    $scope.layout.splice(position, 1);\r\n  }\r\n\r\n  $scope.modifierElement = function (element, index) {\r\n    trierLayoutParPosition();\r\n    if (element.item == 'titre' || element.item =='story') {\r\n      $scope.contenuText = element.contenu;\r\n      $scope.layout.splice(index, 1);\r\n      $scope.positionEdition = element.position;\r\n    }\r\n    if (element.item == 'ingredients' || element.item =='recette') {\r\n      $scope.contenuList = element.contenu;\r\n      $scope.layout.splice(index, 1);\r\n      $scope.positionEdition = element.position;\r\n    }\r\n  }\r\n\r\n  $scope.monterElement = function (position) {\r\n    var positionTmp = $scope.layout[position]['position'];\r\n    $scope.layout[position]['position'] = $scope.layout[--position]['position'];\r\n    $scope.layout[position]['position'] = positionTmp;\r\n    trierLayoutParPosition();\r\n  }\r\n\r\n  $scope.descendreElement = function (position) {\r\n    var positionTmp = $scope.layout[position]['position'];\r\n    $scope.layout[position]['position'] = $scope.layout[++position]['position'];\r\n    $scope.layout[position]['position'] = positionTmp;\r\n    trierLayoutParPosition();\r\n  }\r\n\r\n  var trierLayoutParPosition = function () {\r\n    $scope.layout = $scope.layout.sort(function (elementA, elementB) {\r\n      if (elementA.position < elementB.position) {\r\n        return -1;\r\n      }\r\n      else {\r\n        return 1;\r\n      }\r\n    })\r\n  }\r\n\r\n  $scope.addCommentaire = function (form){\r\n    if (form.$valid) {\r\n      var commentaire = {pseudo:$scope.pseudo, contenu:$scope.contenu, mail:$scope.mail, website:$scope.website, recetteId:$scope.recette.id}\r\n      RecetteService.saveCommentaire(commentaire).then(function(){\r\n        $state.reload();\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  $scope.addRecette = function () {\r\n    var recette = {titre:$scope.recette.titre, layout:$scope.layout}\r\n    if ($scope.recette.id) {\r\n      recette.id = $scope.recette.id;\r\n    }\r\n    RecetteService.saveRecette(recette).then(function () {\r\n      $state.go('home');\r\n    });\r\n  }\r\n\r\n  $scope.deleteRecette = function () {\r\n    RecetteService.deleteRecette($scope.recette.id).then(function() {\r\n      $state.go('home');\r\n    });\r\n  }\r\n\r\n  $scope.addTagToRecette = function (tag) {\r\n      RecetteService.addTagToRecette(tag.id, $scope.recette.id).then(function (response) {\r\n          $scope.recette.tags.push(tag);\r\n      });\r\n  }\r\n\r\n  $scope.removeTagFromRecette = function (tag) {\r\n      RecetteService.removeTagFromRecette(tag.id, $scope.recette.id).then(function (response) {\r\n        $scope.recette.tags.sort(function (tagA, tagB) {\r\n          return tagB.id == tag.id\r\n        }).shift();\r\n\r\n      });\r\n  }\r\n\r\n  $scope.uploadPic = function(file) {\r\n    file.upload = Upload.upload({\r\n      url: 'upload',\r\n      method: 'POST',\r\n      file: file,\r\n    });\r\n\r\n    file.upload.then(function (response) {\r\n        if (response.data.success) {\r\n          $scope.addElement(\"imageH\", response.data.path)\r\n          $scope.picFile=undefined;\r\n        }\r\n      }, function (response) {\r\n      }, function (evt) {\r\n        // Math.min is to fix IE which reports 200% sometimes\r\n        file.progress = Math.min(100, parseInt(100.0 * evt.loaded / evt.total));\r\n      });\r\n    }\r\n\r\n    $scope.isNotSelectedTag = function (tag) {\r\n      return !$scope.recette.tags.some(function (tagRecette) {\r\n        return tagRecette.id == tag.id;\r\n      })\r\n    }\r\n}])\r\n","cookieStoryApp.directive('csCommentaires', function () {\r\n  return {\r\n      restrict: 'EC',\r\n      replace: true,\r\n      scope: {elements: '=elements'},\r\n        templateUrl: 'js/templates/commentaires.html'\r\n  }\r\n});\r\n","cookieStoryApp.directive('csImageH', function () {\r\n  return {\r\n      restrict: 'EC',\r\n      replace: true,\r\n      scope: {image: '=image'},\r\n      template: \"<div class='col-xs-12'><img ng-src={{image}}></img></div>\"\r\n  }\r\n});\r\n","cookieStoryApp.directive('csImageV', function () {\r\n  return {\r\n      restrict: 'EC',\r\n      replace: true,\r\n      scope: {image: '=image'},\r\n      template: \"<div class='col-xs-6'><img ng-src={{image}}></img></div>\"\r\n  }\r\n});\r\n","cookieStoryApp.directive('csIngredients', function () {\r\n  return {\r\n      restrict: 'EC',\r\n      replace: true,\r\n      scope: {elements: '=elements'},\r\n        templateUrl: 'js/templates/ingredients.html'\r\n  }\r\n});\r\n","cookieStoryApp.directive('csRecette', function () {\r\n  return {\r\n      restrict: 'EC',\r\n      replace: true,\r\n      scope: {elements: '=elements'},\r\n      templateUrl: 'js/templates/recette.html'\r\n  }\r\n});\r\n","cookieStoryApp.directive('csStory', function () {\r\n  return {\r\n      restrict: 'EC',\r\n      replace: true,\r\n      scope: {story: '=story'},\r\n      template: \"<div class='col-xs-12'><h2>Il etait une fois...</h2>\" +\r\n      \"<div>{{story}}</div></div>\"\r\n  }\r\n});\r\n","cookieStoryApp.directive('csTitre', function () {\r\n  return {\r\n      restrict: 'EC',\r\n      replace: true,\r\n      scope: {titre: '=titre'},\r\n      template: \"<div class='col-xs-12'><h1>{{titre}}</h1></div>\"\r\n  }\r\n});\r\n","cookieStoryApp.service('RecetteService', ['$http', function ($http) {\r\n\r\n  this.getRecette = function (slug) {\r\n    return $http.get('recette/find?slug='+slug);\r\n  }\r\n\r\n  this.listeRecette = function () {\r\n    return $http.get('recette/liste');\r\n  }\r\n\r\n  this.listeTags = function () {\r\n    return $http.get('tags/liste');\r\n  }\r\n\r\n  this.saveRecette = function (recette) {\r\n    return $http.post('recette/save', {'recette':recette});\r\n  }\r\n\r\n  this.deleteRecette = function (id) {\r\n    return $http.delete('recette/delete?id='+id);\r\n  }\r\n\r\n  this.saveCommentaire = function (commentaire) {\r\n    return $http.post('recette/saveCommentaire', {'commentaire':commentaire});\r\n  }\r\n\r\n  this.addTag = function (nom){\r\n    return $http.post('saveTag',{'nom':nom});\r\n  }\r\n\r\n  this.addTagToRecette = function (tag, recette){\r\n    return $http.post('saveTagToRecette',{'tag':tag, 'recette':recette});\r\n  }\r\n\r\n  this.removeTagFromRecette = function (tag, recette){\r\n    return $http.post('removeTagFromRecette',{'tag':tag, 'recette':recette});\r\n  }\r\n}])\r\n"],"sourceRoot":"/source/"}