{"version":3,"sources":["app.js","admin.controller.js","connexion.controller.js","feed.controller.js","listeRecette.controller.js","recette.controller.js","commentaires.js","images-h.js","images-v.js","ingredients.js","recette.js","story.js","titre.js","admin.service.js","authService.js","feed.service.js","recette.service.js"],"names":["cookieStoryApp","angular","module","constant","window","_","config","$stateProvider","$urlRouterProvider","otherwise","state","url","templateUrl","controller","resolve","Recettes","RecetteService","listeRecette","then","result","data","Tags","listeTags","Admin","AdminService","Recette","$stateParams","getRecette","slug","listeRecetteByTag","abstract","authorizedRights","redirect","run","$state","AuthService","$rootScope","$on","event","next","nextParams","fromState","isAuthorized","preventDefault","go","document","body","scrollTop","documentElement","filter","input","slice","reverse","lettre","myRegex","RegExp","filtre","element","test","titre","$","ready","limitScrollTop","parseInt","offset","top","css","position","z-index","scroll","width","siblings","margin-top","$scope","Upload","recettes","tags","newRecette","modifierRecette","recette","deleteRecette","id","reload","deleteTag","tag","removeTag","saveTag","addTag","uploadPic","file","upload","method","response","success","image","path","picFile","undefined","console","log","evt","progress","Math","min","loaded","total","connexion","identifiant","password","admin","login","FeedService","images","getFeed","res","forEach","link","src","thumbnail","push","alphabet","commentaires","countCommentaire","length","contenuText","contenuList","layout","max","apply","map","o","addElement","contenu","pos","item","positionEdition","trierLayoutParPosition","deleteElement","splice","modifierElement","index","monterElement","positionTmp","descendreElement","sort","elementA","elementB","addCommentaire","form","$valid","commentaire","pseudo","mail","website","recetteId","saveCommentaire","addRecette","saveRecette","addTagToRecette","removeTagFromRecette","tagA","tagB","shift","isNotSelectedTag","some","tagRecette","directive","restrict","replace","scope","elements","template","story","service","$http","this","post","$resource","$q","setUser","value","user","localStorage","setItem","JSON","stringify","setRoles","values","roles","setRights","rights","parse","getItem","deferred","defer","reject","err","promise","logout","get","isAuthenticated","intersection","getAuthenticatedUser","getTag","tagSlug","delete"],"mappings":"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","file":"main.js","sourcesContent":["// Define the `cookieStoryApp` module\nvar cookieStoryApp = angular.module('cookieStoryApp', ['ui.router', 'ngFileUpload', 'ngResource']);\ncookieStoryApp.constant('_', window._);\n\n\ncookieStoryApp.config(function($stateProvider, $urlRouterProvider) {\n\n    $urlRouterProvider.otherwise('/');\n\n    $stateProvider\n        // HOME STATES AND NESTED VIEWS ========================================\n        .state('home', {\n            url: '/',\n            templateUrl: 'views/home.html',\n            controller: 'ListeRecetteCtrl',\n            resolve: {\n              Recettes: function (RecetteService) {\n                return RecetteService.listeRecette().then(function (result) {\n                  return result.data;\n                });\n              },\n              Tags: function (RecetteService) {\n                return RecetteService.listeTags().then(function (result) {\n                  return result.data;\n                });\n              },\n            }\n        })\n        .state('connexion', {\n            url: '/connect',\n            templateUrl: 'views/connexion.html',\n            controller: 'ConnexionCtrl',\n            resolve: {\n              Admin: function (AdminService) {\n                return null;\n              },\n            }\n        })\n        .state('recette', {\n            url: '/recette/{slug}',\n            templateUrl: 'views/recette.html',\n            controller: 'RecetteCtrl',\n            resolve: {\n              Recette: function ($stateParams, RecetteService) {\n                return RecetteService.getRecette($stateParams.slug).then(function siToutEstBon (result) {\n                  return result.data;\n                }, function siQqchPlante() {\n\n                }, function pendantQueLaRequeteEstTraitée() {\n\n                })\n              },\n              Tags: function (RecetteService) {\n                return RecetteService.listeTags().then(function (result) {\n                  return result.data;\n                });\n              },\n            }\n        })\n        .state('indexRecette', {\n            url: '/index',\n            templateUrl: 'views/index.html',\n            controller: 'ListeRecetteCtrl',\n            resolve: {\n              Recettes: function (RecetteService) {\n                return RecetteService.listeRecette().then(function (result) {\n                  return result.data;\n                });\n              },\n              Tags: function (RecetteService) {\n                return RecetteService.listeTags().then(function (result) {\n                  return result.data;\n                });\n              },\n            }\n        })\n        .state('categories', {\n            url: '/categories',\n            templateUrl: 'views/categories.html',\n            controller: 'ListeRecetteCtrl',\n            resolve: {\n              Recettes: function (RecetteService) {\n                return RecetteService.listeRecette().then(function (result) {\n                  return result.data;\n                });\n              },\n              Tags: function (RecetteService) {\n                return RecetteService.listeTags().then(function (result) {\n                  return result.data;\n                });\n              },\n            }\n        })\n        .state('categorieListeRecette', {\n            url: '/categorie/{slug}',\n            templateUrl: 'views/categorieListeRecette.html',\n            controller: 'ListeRecetteCtrl',\n            resolve: {\n              Recettes: function (RecetteService, $stateParams) {\n                return RecetteService.listeRecetteByTag($stateParams.slug).then(function (result) {\n                  return result.data;\n                });\n              },\n              Tags: function () {\n                return [];\n              },\n            }\n        })\n        .state('admin', {\n            url: \"/admin\",\n            abstract: true,\n            templateUrl: 'views/admin.html',\n            data: {\n                authorizedRights: ['admin.read'],\n                redirect: 'connexion'\n            },\n        })\n        .state('admin.pageAdmin', {\n            url: '/gestion',\n            templateUrl: 'views/pageAdmin.html',\n            controller: 'adminCtrl',\n            resolve: {\n              Recettes: function (RecetteService) {\n                return RecetteService.listeRecette().then(function (result) {\n                  return result.data;\n                });\n              },\n              Tags: function (RecetteService) {\n                return RecetteService.listeTags().then(function (result) {\n                  return result.data;\n                });\n              },\n            }\n        })\n        .state('admin.newRecette', {\n            url: '/recette',\n            templateUrl: 'views/add.recette.html',\n            controller: 'RecetteCtrl',\n            resolve: {\n              Recette: function () {\n                return null;\n              },\n              Tags: function (RecetteService) {\n                return RecetteService.listeTags().then(function (result) {\n                  return result.data;\n                });\n              },\n            }\n        })\n        .state('admin.modifierRecette', {\n            url: '/modifRecette/{slug}',\n            templateUrl: 'views/add.recette.html',\n            controller: 'RecetteCtrl',\n            resolve: {\n              Recette: function ($stateParams, RecetteService) {\n                return RecetteService.getRecette($stateParams.slug).then(function siToutEstBon (result) {\n                  return result.data;\n                }, function siQqchPlante() {\n\n                }, function pendantQueLaRequeteEstTraitée() {\n\n                })\n              },\n              Tags: function (RecetteService) {\n                return RecetteService.listeTags().then(function (result) {\n                  return result.data;\n                });\n              },\n            }\n        })\n});\n\ncookieStoryApp.run(function ($state, AuthService, $rootScope) {\n    $rootScope.$on('$stateChangeStart', function (event, next, nextParams, fromState) {\n        if ('data' in next && 'authorizedRights' in next.data) {\n            var authorizedRights = next.data.authorizedRights;\n            if (!AuthService.isAuthorized(authorizedRights)) {\n                event.preventDefault();\n                $state.go(next.data.redirect);\n            }\n        }\n    });\n    $rootScope.$on('$stateChangeSuccess', function() {\n      document.body.scrollTop = document.documentElement.scrollTop = 0;\n    });\n});\n\n\n\ncookieStoryApp.filter('reverse', function() {\n  return function(input) {\n    return input.slice().reverse();\n  };\n});\n\ncookieStoryApp.filter('lettre', function() {\n  return function(input, lettre) {\n    var myRegex = new RegExp(\"^\" + lettre, \"i\");\n    var filtre = function (element) {\n      if(myRegex.test(element.titre)){\n        return element;\n      }\n    }\n    return input.filter(filtre);\n  };\n});\n","cookieStoryApp.controller('adminCtrl', ['$scope', '$state', 'RecetteService', 'Recettes', 'Tags', 'Upload',\n  function ($scope, $state, RecetteService, Recettes, Tags, Upload)\n{\n  $scope.recettes = Recettes;\n  $scope.tags = Tags;\n\n  $scope.newRecette = function () {\n    $state.go('admin.newRecette');\n  }\n\n  $scope.modifierRecette = function (recette) {\n    $state.go('admin.modifierRecette', {'slug': recette.slug});\n  }\n\n  $scope.deleteRecette = function (recette) {\n    RecetteService.deleteRecette(recette.id).then(function() {\n      $state.reload();\n    });\n  }\n\n  $scope.deleteTag = function (tag) {\n    RecetteService.removeTag(tag.id).then(function() {\n      $state.reload();\n    });\n  }\n\n  $scope.saveTag = function () {\n    RecetteService.addTag($scope.tag).then(function(){ // {nom: binding html, image: path après upload}\n      $state.reload();\n    })\n  }\n\n  $scope.uploadPic = function(file) {\n    file.upload = Upload.upload({\n      url: 'upload',\n      method: 'POST',\n      file: file,\n    });\n\n    file.upload.then(function (response) {\n        if (response.data.success) {\n          $scope.tag.image = response.data.path;\n          $scope.picFile=undefined;\n        }\n        else{\n          console.log(response);\n        }\n      }, function (response) {\n      }, function (evt) {\n        // Math.min is to fix IE which reports 200% sometimes\n        file.progress = Math.min(100, parseInt(100.0 * evt.loaded / evt.total));\n      });\n    }\n\n}])\n","cookieStoryApp.controller('ConnexionCtrl', ['$scope', '$state', 'Admin', 'AuthService',\n  function ($scope, $state, Admin, AuthService)\n{\n  $scope.connexion = function (identifiant, password){\n    var admin = {identifiant:identifiant,password:password}\n    AuthService.login(admin).then(function(response){\n      if(response.data.id){\n        $state.go('admin.pageAdmin');\n      }else{\n\n      }\n    });\n  }\n\n}])\n","cookieStoryApp.controller('feedCtrl', ['$scope', 'FeedService',\n  function ($scope, FeedService)\n{\n\n  $scope.images = [];\n\n  FeedService.getFeed().then(function (res) {\n    res.data.data.forEach(function (data) {\n      var image = {\n        link: data.link,\n        src: data.images.thumbnail.url\n      }\n\n      $scope.images.push(image);\n    })\n  })\n}])\n","cookieStoryApp.controller('ListeRecetteCtrl', ['$scope', '$state', 'RecetteService', 'Recettes', 'Tags',\n  function ($scope, $state, RecetteService, Recettes, Tags)\n{\n  $scope.alphabet = [\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\",\"I\",\"J\",\"K\",\"L\",\"M\",\"N\",\"O\",\"P\",\"Q\",\"R\",\"S\",\"T\",\"U\",\"V\",\"W\",\"X\",\"Y\",\"Z\"];\n  $scope.recettes = Recettes;\n  $scope.tags = Tags;\n\n}])\n","cookieStoryApp.controller('RecetteCtrl', ['$scope', '$state', 'Upload', 'RecetteService', 'Recette', 'Tags',\n  function ($scope, $state, Upload, RecetteService, Recette, Tags)\n{\n\n  $scope.recette = Recette || {commentaires:[], tags:[]};\n  $scope.tags = Tags;\n  $scope.countCommentaire = $scope.recette.commentaires.length;\n\n\n  $scope.contenuText='';\n  $scope.contenuList = [];\n\nif (Recette){\n  $scope.layout=Recette.layout;\n  var position = Math.max.apply(null,Recette.layout.map(function(o){return o.position;}))+1;\n}\nelse{\n  $scope.layout = [];\n  var position = 1;\n}\n\n  $scope.addElement = function (element, contenu, pos) {\n    if (element == 'titre') {\n      $scope.layout.push({item:'titre', position:pos ? pos : position, contenu:contenu})\n      $scope.recette.titre = contenu;\n    }\n    if (element == 'imageH') {\n      $scope.layout.push({item:'imageH', position:pos ? pos : position, contenu:contenu})\n    }\n    if (element == 'story') {\n      $scope.layout.push({item:'story', position:pos ? pos : position, contenu:contenu})\n    }\n    if (element == 'recette') {\n      $scope.layout.push({item:'recette', position:pos ? pos : position, contenu:contenu})\n    }\n    if (element == 'ingredients') {\n      $scope.layout.push({item:'ingredients', position:pos ? pos : position, contenu:contenu})\n    }\n    position++;\n    $scope.contenuText='';\n    $scope.contenuList = [];\n    $scope.positionEdition = undefined;\n    trierLayoutParPosition();\n  }\n\n  $scope.deleteElement = function (position) {\n    $scope.layout.splice(position, 1);\n    trierLayoutParPosition();\n  }\n\n  $scope.modifierElement = function (element, index) {\n    if (element.item == 'titre' || element.item =='story') {\n      $scope.contenuText = element.contenu;\n      $scope.layout.splice(index, 1);\n      $scope.positionEdition = element.position;\n    }\n    if (element.item == 'ingredients' || element.item =='recette') {\n      $scope.contenuList = element.contenu;\n      $scope.layout.splice(index, 1);\n      $scope.positionEdition = element.position;\n    }\n    trierLayoutParPosition();\n  }\n\n  $scope.monterElement = function (position) {\n    var positionTmp = $scope.layout[position]['position'];\n    $scope.layout[position]['position'] = $scope.layout[--position]['position'];\n    $scope.layout[position]['position'] = positionTmp;\n    trierLayoutParPosition();\n  }\n\n  $scope.descendreElement = function (position) {\n    var positionTmp = $scope.layout[position]['position'];\n    $scope.layout[position]['position'] = $scope.layout[++position]['position'];\n    $scope.layout[position]['position'] = positionTmp;\n    trierLayoutParPosition();\n  }\n\n  var trierLayoutParPosition = function () {\n    $scope.layout = $scope.layout.sort(function (elementA, elementB) {\n      if (elementA.position < elementB.position) {\n        return -1;\n      }\n      else {\n        return 1;\n      }\n    })\n  }\n\n  $scope.addCommentaire = function (form){\n    if (form.$valid) {\n      var commentaire = {pseudo:$scope.pseudo, contenu:$scope.contenu, mail:$scope.mail, website:$scope.website, recetteId:$scope.recette.id}\n      RecetteService.saveCommentaire(commentaire).then(function(){\n        $state.reload();\n      });\n    }\n  }\n\n  $scope.addRecette = function () {\n    var recette = {titre:$scope.recette.titre, layout:$scope.layout}\n    if ($scope.recette.id) {\n      recette.id = $scope.recette.id;\n    }\n    RecetteService.saveRecette(recette).then(function () {\n      $state.go('admin.pageAdmin');\n    });\n  }\n\n  $scope.deleteRecette = function () {\n    RecetteService.deleteRecette($scope.recette.id).then(function() {\n      $state.go('home');\n    });\n  }\n\n  $scope.addTagToRecette = function (tag) {\n      RecetteService.addTagToRecette(tag.id, $scope.recette.id).then(function (response) {\n          $scope.recette.tags.push(tag);\n      });\n  }\n\n  $scope.removeTagFromRecette = function (tag) {\n      RecetteService.removeTagFromRecette(tag.id, $scope.recette.id).then(function (response) {\n        $scope.recette.tags.sort(function (tagA, tagB) {\n          return tagB.id == tag.id\n        }).shift();\n      });\n  }\n\n  $scope.uploadPic = function(file) {\n    file.upload = Upload.upload({\n      url: 'upload',\n      method: 'POST',\n      file: file,\n    });\n\n    file.upload.then(function (response) {\n        if (response.data.success) {\n          $scope.addElement(\"imageH\", response.data.path)\n          $scope.picFile=undefined;\n        }\n      }, function (response) {\n      }, function (evt) {\n        // Math.min is to fix IE which reports 200% sometimes\n        file.progress = Math.min(100, parseInt(100.0 * evt.loaded / evt.total));\n      });\n    }\n\n    $scope.isNotSelectedTag = function (tag) {\n      return !$scope.recette.tags.some(function (tagRecette) {\n        return tagRecette.id == tag.id;\n      })\n    }\n}])\n","cookieStoryApp.directive('csCommentaires', function () {\n  return {\n      restrict: 'EC',\n      replace: true,\n      scope: {elements: '=elements'},\n        templateUrl: 'js/templates/commentaires.html'\n  }\n});\n","cookieStoryApp.directive('csImageH', function () {\n  return {\n      restrict: 'EC',\n      replace: true,\n      scope: {image: '=image'},\n      template: \"<div class='col-xs-12'><img ng-src={{image}}></img></div>\"\n  }\n});\n","cookieStoryApp.directive('csImageV', function () {\n  return {\n      restrict: 'EC',\n      replace: true,\n      scope: {image: '=image'},\n      template: \"<div class='col-xs-6'><img ng-src={{image}}></img></div>\"\n  }\n});\n","cookieStoryApp.directive('csIngredients', function () {\n  return {\n      restrict: 'EC',\n      replace: true,\n      scope: {elements: '=elements'},\n        templateUrl: 'js/templates/ingredients.html'\n  }\n});\n","cookieStoryApp.directive('csRecette', function () {\n  return {\n      restrict: 'EC',\n      replace: true,\n      scope: {elements: '=elements'},\n      templateUrl: 'js/templates/recette.html'\n  }\n});\n","cookieStoryApp.directive('csStory', function () {\n  return {\n      restrict: 'EC',\n      replace: true,\n      scope: {story: '=story'},\n      template: \"<div class='col-xs-12'><h2>Il etait une fois...</h2>\" +\n      \"<div>{{story}}</div></div>\"\n  }\n});\n","cookieStoryApp.directive('csTitre', function () {\n  return {\n      restrict: 'EC',\n      replace: true,\n      scope: {titre: '=titre'},\n      template: \"<div class='col-xs-12'><h1>{{titre}}</h1></div>\"\n  }\n});\n","cookieStoryApp.service('AdminService', ['$http', function ($http) {\n\n  this.connexion = function (admin) {\n    return $http.post('admin/connect', {'admin':admin});\n  }\n\n}])\n","cookieStoryApp.service('AuthService', ['$resource', '$http', '$q', '_', function($resource, $http, $q, _) {\n  var user = JSON.parse(localStorage.getItem('auth_user'));\n  var roles = JSON.parse(localStorage.getItem('auth_roles'));\n  var rights = JSON.parse(localStorage.getItem('auth_rights'));\n\n  function setUser(value) {\n    user = value;\n    localStorage.setItem('auth_user', JSON.stringify(user));\n  }\n\n  function setRoles(values) {\n      roles = values;\n      localStorage.setItem('auth_roles', JSON.stringify(roles));\n  }\n\n  function setRights(values) {\n      rights = values;\n      localStorage.setItem('auth_rights', JSON.stringify(rights));\n  }\n\n  this.login = function(admin) {\n      var deferred = $q.defer();\n      $http.post('admin/connect', {'admin':admin})\n        .then(function(response) {\n          var user = response.data;\n          if (user.id) {\n            setUser(user);\n\n            //Set Roles and Rights\n            setRoles([\"SUPER_ADMIN\"]); // [\"super_admin\"]\n            setRights([\"admin.read\"]); // [\"admin.read\"]\n\n            deferred.resolve(response);\n          }\n          else {\n            deferred.reject(response);\n          }\n      }, function(response) {\n          var err = response.data;\n          deferred.reject(err);\n      });\n      return deferred.promise;\n  };\n\n  this.logout = function() {\n      setUser(null);\n      setRoles([]);\n      setRights([]);\n\n      return $http.get('auth/logout');\n  };\n\n  this.isAuthenticated = function() {\n      return user !== null;\n  };\n\n  this.isAuthorized = function(authorizedRights) {\n      //console.log(\"authorizedRights : \" + JSON.stringify(authorizedRights));\n      if(authorizedRights.length == 0 || _.intersection(rights, authorizedRights).length > 0 ) {\n          return true;\n      } else {\n          return false;\n      }\n  };\n\n  this.getAuthenticatedUser = function() {\n      return user;\n  };\n}]);\n","cookieStoryApp.service('FeedService', ['$http', function ($http) {\n\n  this.getFeed = function (admin) {\n    return $http.get('feed');\n  }\n\n}])\n","cookieStoryApp.service('RecetteService', ['$http', function ($http) {\n\n  this.getRecette = function (slug) {\n    return $http.get('recette/find?slug='+slug);\n  }\n\n  this.getTag = function (slug) {\n    return $http.get('tag/find?slug='+slug);\n  }\n\n  this.listeRecette = function () {\n    return $http.get('recette/liste');\n  }\n\n  this.listeRecetteByTag = function (tagSlug) {\n    return $http.get('recette/tag?slug='+tagSlug);\n  }\n\n  this.listeTags = function () {\n    return $http.get('tags/liste');\n  }\n\n  this.saveRecette = function (recette) {\n    return $http.post('recette/save', {'recette':recette});\n  }\n\n  this.deleteRecette = function (id) {\n    return $http.delete('recette/delete?id='+id);\n  }\n\n  this.saveCommentaire = function (commentaire) {\n    return $http.post('recette/saveCommentaire', {'commentaire':commentaire});\n  }\n\n  this.addTag = function (tag){\n    return $http.post('saveTag',{'tag':tag});\n  }\n\n  this.removeTag = function (tag){\n    return $http.post('removeTag',{'tag':tag});\n  }\n\n  this.addTagToRecette = function (tag, recette){\n    return $http.post('saveTagToRecette',{'tag':tag, 'recette':recette});\n  }\n\n  this.removeTagFromRecette = function (tag, recette){\n    return $http.post('removeTagFromRecette',{'tag':tag, 'recette':recette});\n  }\n}])\n"],"sourceRoot":"/source/"}